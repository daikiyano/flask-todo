
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAu7SJ8PPOE7joPkc3Fdo9N_ilqgJLZb94" type="text/javascript"></script>

<script type="text/javascript">
  var map;
  function initialize() {
    // 地図を表示する際のオプションを設定
    var mapOptions = {
      center: new google.maps.LatLng(35.6288505, 139.65863579999996),
      zoom: 16,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    // Mapオブジェクトに地図表示要素情報とオプション情報を渡し、インスタンス生成
    map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
  }

  function search(){
    var place = document.getElementById('place').value;
    var geocoder = new google.maps.Geocoder();
    // ジオコーディング　検索実行
    geocoder.geocode({"address" : place}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      var lat = results[0].geometry.location.lat();//緯度を取得
      var lng = results[0].geometry.location.lng();//経度を取得
      var ido = document.getElementById('ido')
        ido.innerHTML = lat;
        var keido = document.getElementById('keido')
        keido.innerHTML = lng;
        var mark = {
            lat: lat, // 緯度
            lng: lng // 経度
            };
            marker = new google.maps.Marker({ // マーカーの追加
            position: mark, // マーカーを立てる位置を指定
            map: map // マーカーを立てる地図を指定
            });

            map.setCenter(results[0].geometry.location); // 地図の中心を移動
            cnt =0;
            }
       });
       //}
    }
</script>

{% extends "base.html" %}
{% block content %}
<span id="ido" style="display:none;">35.6585805</span><br />
<span id="keido" style="display:none;">139.74543289999997</span>
<div class="container"　style="color:#45494b;">
  <form class="form-group" method="POST" action="" enctype="multipart/form-data">
    {{form.hidden_tag()}}

    <div class="form-group">
      <h5><i class="fas fa-cat"></i>{{form.title.label(class="form-control-label")}}</h5>
        {{form.title(placeholder="イベント名",class="form_input form-control form-contorl-lg",onkeyup="ShowLength(value,inputlength1);")}}
        {% for error in form.title.errors %}
          <span style="color: red;">{{ error }}</span><br>
        {% endfor %}
    </div>

    <div class="form-group">
      <h5><i class="far fa-calendar-alt"></i>{{form.text.label(class="form-control-label")}}</h5>
      {{form.text(style="height:300px;",class="form_input form-control",rows='50',cols='100')}}
      {% for error in form.text.errors %}
        <span style="color: red;">{{ error }}</span><br>
      {% endfor %}
    </div>
    <div class="form-group" style="width:50%;">
      <h5><i class="far fa-calendar-alt"></i>{{form.event_date.label(class="form-control-label")}}</h5>
      {{form.event_date(placeholder="年/月/日",class="form_input form-control form-contorl-lg")}}
      {% for error in form.event_date.errors %}
        <span style="color: red;">{{ error }}</span><br>
      {% endfor %}
    </div>
    <div class="form-group" style="width:50%;">
      <h5><i class="far fa-calendar-alt"></i>{{form.event_time.label(class="form-control-label")}}</h5>
      {{form.event_time(placeholder="09:00",class="form_input form-control form-contorl-lg")}}
      {% for error in form.event_time.errors %}
        <span style="color: red;">{{ error }}</span><br>
      {% endfor %}
    </div>
    <div class="form-group">
      <h5><i class="far fa-user"></i>{{form.organizer.label(class="form-control-label")}}</h5>
      {{form.organizer(placeholder="団体名(サークル、部活、ゼミ等)",class="form_input form-control form-contorl-lg")}}
      {% for error in form.organizer.errors %}
        <span style="color: red;">{{ error }}</span><br>
      {% endfor %}
    </div>
    <div class="form-group">
      <h5><i class="fas fa-thumbtack"></i>{{form.place.label(class="form-control-label")}}</h5>
        {{form.place(placeholder="例)駒澤大学　8号館8-123)",class="form_input form-control form-contorl-lg",id="place")}}
        {% for error in form.place.errors %}
          <span style="color: red;">{{ error }}</span><br>
        {% endfor %}
        <button type="button" class="btn btn-outline-primary" onclick="search()">検索</button>
    </div>
    <div id="map_canvas" style="margin: 30px 0;width:100%; height:50%"></div>
    <div class="form-group">
      <h5><i class="far fa-check-circle"></i>{{form.entry.label(class="form-control-label")}}</h5>
        {{form.entry(placeholder="必要な持ち物、資格など",style="height:300px;",class="form_input form-control form-contorl-lg")}}
        {% for error in form.entry.errors %}
          <span style="color: red;">{{ error }}</span><br>
        {% endfor %}
    </div>
    <div class="form-group">
      <h5><i class="far fa-flag"></i>{{form.way.label(class="form-control-label")}}</h5>
        {{form.way(placeholder="参加フォームなどのURL",style="height:300px;",class="form_input form-control form-contorl-lg")}}
        {% for error in form.way.errors %}
          <span style="color: red;">{{ error }}</span><br>
        {% endfor %}
    </div>
    <div class="form-group">
        <h5><i class="fas fa-yen-sign"></i>{{form.cost.label(class="form-control-label")}}</h5>
        {{form.cost(placeholder="参加にかかる費用",class="form_input form-control form-contorl-lg")}}
        {% for error in form.cost.errors %}
          <span style="color: red;">{{ error }}</span><br>
        {% endfor %}
    </div>
    <div class="form-group">
      <h5><i class="far fa-address-card"></i>{{form.contact.label(class="form-control-label")}}</h5>
        {{form.contact(placeholder="メールアドレス、HPのURLなど",class="form_input form-control form-contorl-lg")}}
        {% for error in form.contact.errors %}
          <span style="color: red;">{{ error }}</span><br>
        {% endfor %}
    </div>
    <div class="form-group">
      <h5><i class="far fa-images"></i>{{form.image.label(class="form-control-label")}}</h5>
        *画像形式はjpg,png,jpeg,gifのみ対応しています。
      {{form.image(class="form_input form-control form-contorl-lg")}}
    <br>
      {% for error in form.image.errors %}
        <span style="color: red;">{{ error }}</span><br>
      {% endfor %}
    </div>
    <div class="preview">
    {% if post_image %}
      <img src="{{post_image}}" class="preview id="remove_image">
    {% endif %}
    </div>

    <div class="form-group" style="width:100%;">
      {{form.submit(class="btn btn-outline-primary btn",style="margin-bottom:30px;")}}
    </div>


  </form>
<div id="out"></div>

</div>

{% endblock %}
